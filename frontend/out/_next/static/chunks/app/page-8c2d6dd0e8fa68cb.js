(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9693:(e,n,t)=>{Promise.resolve().then(t.bind(t,1485))},1485:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>G});var i=t(5155),r=t(2115),a=t(3391),s=t(6046),o=t(4241),l=t(9949),d=t(6500),c=t(674),h=t(9829),m=t(3083),p=t(9123),u=t(2533),x=t(6799),g=t(3420);let f=function(e){let{colorMode:n}=(0,x.G6)();return(0,i.jsxs)(g.T,{border:"light"===n?"solid 1px #468DA4":"solid 1px #282828",padding:"0.5rem",paddingTop:"0",backgroundColor:"light"===n?"#85E2FF":"#495255",children:[(0,i.jsx)(m.E,{fontSize:"3xl",fontWeight:"bold",children:e.hanzi}),e.pinyin?(0,i.jsx)(m.E,{fontSize:"l",children:e.pinyin.toLowerCase()}):null]})};var j=t(6677),w=t(2311),y=t(878),v=t(4825),S=t(7504),b=t(5442),T=t(3045),E=t(6153),k=t.n(E);let z=function(e){return(0,i.jsxs)(j.aF,{isOpen:e.isOpen,onClose:e.onClose,isCentered:!0,children:[(0,i.jsx)(w.m,{}),(0,i.jsxs)(y.$,{maxWidth:"90vw",maxHeight:"90vh",width:"auto",height:"auto",children:[(0,i.jsx)(v.s,{}),(0,i.jsx)(S.c,{display:"flex",p:"3rem",overflow:"scroll",children:(0,i.jsxs)(g.T,{children:[(0,i.jsx)(b.D,{children:e.word}),(0,i.jsx)(b.D,{size:"sm",children:e.pronunciations.join(" ")}),e.definitions.map((n,t)=>(0,i.jsxs)("div",{children:[(0,i.jsx)(m.E,{textAlign:"center",children:"".concat(e.definitions.length>1?t+1+".":""," ").concat(n)},t),e.definitions.length-1>t?(0,i.jsx)(T.c,{}):null]},t)),1!==e.word.split("").length?(0,i.jsx)(g.T,{align:"start",children:e.word.split("").map((n,t)=>(0,i.jsxs)(c.z,{children:[(0,i.jsx)(f,{hanzi:n,pinyin:k()(e.dictionary[n].pinyin[0])}),(0,i.jsx)(m.E,{children:e.dictionary[n].english})]},t))}):null]})})]})]})};var I=t(3166),C=t(6987),_=t(3862),A=t(3885),D=t(9399);let L=function(e){let n=e.word.word===e.pronunciation[0]||""===e.word.word,{isOpen:t,onOpen:r,onClose:a}=(0,I.j)(),{colorMode:s}=(0,x.G6)();return(0,i.jsx)(i.Fragment,{children:n?(0,i.jsx)(u.s,{align:"center",justify:"center",h:"70%",m:2,children:(0,i.jsx)(m.E,{fontSize:"lg",children:e.word.word})}):(0,i.jsxs)(C.Z,{variant:"unstyled",backgroundColor:"light"===s?"#B8EEFF":"#333c40",margin:"0.1rem",marginBottom:"0.5rem",padding:"0.2rem",border:"light"===s?"1px solid #468DA4":"1px solid #1e282c",borderRadius:"4",boxShadow:"1px 1px 1px rgba(0, 0, 0, 0.25)",onClick:r,children:[(0,i.jsx)(z,{pronunciations:e.pronunciation,word:e.word.word,definitions:e.definitions,dictionary:e.dictionary,isOpen:t,onOpen:r,onClose:a}),(0,i.jsx)(_.b,{children:(0,i.jsx)(A.o,{children:(0,i.jsx)(c.z,{spacing:"0.1rem",children:e.word.word.split("").map((n,t)=>(0,i.jsx)(f,{hanzi:n,pinyin:e.pronunciation[t]},t))})})}),(0,i.jsx)(A.o,{children:(0,i.jsx)(D.w,{children:(0,i.jsx)(m.E,{noOfLines:2,maxWidth:"10rem",minWidth:"5rem",fontSize:"sm",height:"2.6rem",marginTop:"0.5rem",marginBottom:"0.5rem",textAlign:"center",children:e.definitions.join("; ")})})})]})})},W=function(e){return(0,i.jsx)(u.s,{align:"stretch",w:"100%",h:"100%",px:["0","5%"],flexWrap:"wrap",mb:["45vh","20vh"],overflow:"hidden",children:e.sentence.map((n,t)=>(0,i.jsx)(L,{word:n,pronunciation:n.pinyin,definitions:n.definitions,dictionary:e.dictionary},t))})},M=function(e){let[n,t]=(0,r.useState)(!1),{colorMode:a}=(0,x.G6)();return(0,i.jsxs)(l.a,{className:"translation",p:4,borderWidth:1,borderBottomWidth:0,borderTopRadius:"lg",borderColor:"black",position:"fixed",bottom:0,left:["0%","10%"],right:["0%","10%"],width:["100%","80%"],height:n?"1vh":["45vh","20vh"],overflowY:n?"hidden":"scroll",shadow:"md",bg:"light"===a?"white":"#282828",zIndex:1,children:[(0,i.jsx)(l.a,{onClick:()=>t(!n),width:"40%",minW:"10rem",height:"0.3rem",bg:"darkgrey",borderRadius:"md",cursor:"pointer",position:"fixed",left:"50%",transform:"translateX(-50%)"}),(0,i.jsx)(A.o,{children:(0,i.jsx)(m.E,{mt:3,textAlign:"justify",px:5,children:e.text})})]})};var O=t(4605);function R(e){return(0,i.jsx)(A.o,{m:"0",position:"sticky",top:"2.5rem",left:0,right:0,zIndex:1,width:"100%",children:0==e.progress_percent?(0,i.jsx)(O.k,{w:"100%",colorScheme:"blue",hasStripe:!0,isIndeterminate:!0,overflow:"hidden",zIndex:"1000",size:"xs"}):(0,i.jsx)(O.k,{w:"100%",colorScheme:"blue",hasStripe:!0,size:"xs",overflow:"hidden",zIndex:"1000",value:e.progress_percent})})}class F{start(){if(null!==this.timerId)throw Error("Timer is already running.");this.startTime=performance.now(),this.timerId=window.setInterval(()=>{null!==this.startTime&&(this.elapsedTime=performance.now()-this.startTime)},1)}stop(){if(null===this.timerId)throw Error("Timer is not running.");null!==this.startTime&&(this.elapsedTime=performance.now()-this.startTime),clearInterval(this.timerId),this.timerId=null}reset(){this.startTime=null,this.elapsedTime=0,null!==this.timerId&&(clearInterval(this.timerId),this.timerId=null)}getElapsedTime(){return this.elapsedTime}constructor(){this.startTime=null,this.elapsedTime=0,this.timerId=null}}let H=new F;H.start(),setTimeout(()=>{H.stop(),console.log("Elapsed time (ms):",H.getElapsedTime())},500);var q=t(9009);let N=t(2651).A.create({baseURL:"https://mandobot.pythonanywhere.com/api"}),B=e=>{var n;let t=null===(n=e.response)||void 0===n?void 0:n.status;return t&&401!==t&&console.error(e),Promise.reject(e)};N.interceptors.response.use(void 0,e=>B(e));let Z={segment:async function(e){return(await N.post("/segment?data=".concat(e))).data},share:async function(e){return(await N.post("/share",e,{headers:{"Content-Type":"application/json"}})).data},shared:async function(e){return(await N.get("/shared?share_id=".concat(e))).data}};function G(){let e=(0,o.j)(),n=(0,s.useSearchParams)().get("share_id")||"",t=(0,a.d4)(e=>e.mandarinSentence.mandarinSentence),u=(0,a.d4)(e=>e.mandarinSentence.mandarinDictionary),x=(0,a.d4)(e=>e.mandarinSentence.isLoading),[g,f]=(0,r.useState)(0),[j,w]=(0,r.useState)(""),y=n=>{e((0,p.RA)({translation:n.translation,sentence:n.sentence})),e((0,p.kl)(n.dictionary))};(0,r.useEffect)(()=>{""!==n&&Z.shared(n).then(t=>{y(t),e((0,p.qH)(n))})},[e,y,n]);let v=()=>{e((0,p.v_)()),e((0,p.Ei)()),e((0,p.r1)(!1)),e((0,p.qH)("")),f(0),(0,p.qH)("")},S=async n=>{if(n.preventDefault(),v(),""==j)return;e((0,p.r1)(!0));let t=new F;if(t.start(),j.length>100)for(let e of j.split(RegExp("(?<=[。？！.?!])")))await Z.segment(e).then(e=>{y(e)}),f(n=>n+Math.floor(e.length/j.length*100));else await Z.segment(j).then(e=>{y(e)});e((0,p.r1)(!1)),t.stop(),console.log(t.getElapsedTime())};(0,r.useEffect)(()=>{x||t===q.l||""!==n||b()},[t,x]);let b=async()=>{let n={translation:t.translation,sentence:t.sentence,dictionary:u};await Z.share(n).then(n=>{e((0,p.qH)(n))})};return(0,i.jsxs)(l.a,{h:"100%",children:[x?(0,i.jsx)(R,{progress_percent:g}):null,(0,i.jsxs)("form",{onSubmit:S,children:[(0,i.jsx)(d.p,{type:"text",placeholder:"Enter Mandarin text to translate and segment",value:j,onChange:e=>{w(e.target.value)},mb:"0",mt:x?"0":"0.25rem"}),(0,i.jsxs)(c.z,{children:[(0,i.jsx)(h.$,{type:"submit",colorScheme:"teal",m:2,children:"Submit"}),x?(0,i.jsx)(m.E,{color:"gray.600",textAlign:"center",w:"60%",children:0==g?"Segmentation and translation can take several minutes.":"Your results will load one sentence at a time."}):null]})]}),(0,i.jsxs)(l.a,{h:"100%",children:[(0,i.jsx)(W,{sentence:t.sentence,translation:t.translation,dictionary:u}),0!==t.sentence.length?(0,i.jsx)(M,{text:t.translation}):null]})]})}},9123:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>p,Ei:()=>c,RA:()=>o,kl:()=>d,qH:()=>m,r1:()=>h,v_:()=>l});var i=t(8943),r=t(9009);let a={mandarinSentence:r.l,mandarinDictionary:{},isLoading:!1,shareLink:""},s=(0,i.Z0)({name:"mandarinSentence",initialState:a,reducers:{appendToMandarinSentence(e,n){let t="";t=""!==e.mandarinSentence.translation?n.payload.translation:" "+n.payload.translation,e.mandarinSentence.translation+=t,e.mandarinSentence.sentence=[...e.mandarinSentence.sentence,...n.payload.sentence]},clearMandarinSentence(e){e.mandarinSentence=r.l},appendToMandarinDictionary(e,n){e.mandarinDictionary={...e.mandarinDictionary,...n.payload}},clearMandarinDictionary(e){e.mandarinDictionary={}},setLoading(e,n){e.isLoading=n.payload},setShareLink(e,n){e.shareLink=n.payload}}}),{appendToMandarinSentence:o,clearMandarinSentence:l,appendToMandarinDictionary:d,clearMandarinDictionary:c,setLoading:h,setShareLink:m}=s.actions,p=s.reducer},4241:(e,n,t)=>{"use strict";t.d(n,{M:()=>u,j:()=>x});var i=t(8943),r=t(3391);let a=(0,i.Z0)({name:"auth",initialState:{token:null},reducers:{setToken(e,n){e.token=n.payload},clearToken(e){e.token=null}}}),{setToken:s,clearToken:o}=a.actions,l=a.reducer,d=(0,i.Z0)({name:"settings",initialState:{theme:"light",notificationsEnabled:!0},reducers:{toggleTheme(e){e.theme="light"===e.theme?"dark":"light"},setNotificationsEnabled(e,n){e.notificationsEnabled=n.payload}}}),{toggleTheme:c,setNotificationsEnabled:h}=d.actions,m=d.reducer;var p=t(9123);let u=(0,i.U1)({reducer:{auth:l,settings:m,mandarinSentence:p.Ay}}),x=r.wA},9009:(e,n,t)=>{"use strict";t.d(n,{l:()=>i});let i={translation:"",sentence:[]}}},e=>{var n=n=>e(e.s=n);e.O(0,[71,869,441,517,358],()=>n(9693)),_N_E=e.O()}]);