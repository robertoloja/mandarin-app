(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9693:(e,n,i)=>{Promise.resolve().then(i.bind(i,4974))},4974:(e,n,i)=>{"use strict";i.r(n),i.d(n,{default:()=>I});var t=i(5155),r=i(2115),s=i(9949),o=i(6500),l=i(674),a=i(9829),d=i(3083),c=i(2533),h=i(6799),x=i(3420);let p=function(e){let{colorMode:n}=(0,h.G6)();return(0,t.jsxs)(x.T,{border:"light"===n?"solid 1px #468DA4":"solid 1px #282828",padding:"0.5rem",paddingTop:"0",backgroundColor:"light"===n?"#85E2FF":"#495255",children:[(0,t.jsx)(d.E,{fontSize:"3xl",fontWeight:"bold",children:e.hanzi}),e.pinyin?(0,t.jsx)(d.E,{fontSize:"l",children:e.pinyin.toLowerCase()}):null]})};var u=i(6677),m=i(2311),g=i(878),j=i(4825),f=i(7504),w=i(5442),y=i(3045);let b=function(e){let n;return(0,t.jsxs)(u.aF,{isOpen:e.isOpen,onClose:e.onClose,isCentered:!0,children:[(0,t.jsx)(m.m,{}),(0,t.jsxs)(g.$,{maxWidth:"90vw",maxHeight:"90vh",width:"auto",height:"auto",children:[(0,t.jsx)(j.s,{}),(0,t.jsx)(f.c,{display:"flex",p:"3rem",overflow:"scroll",children:(0,t.jsxs)(x.T,{children:[(0,t.jsx)(w.D,{children:e.word}),(0,t.jsx)(w.D,{size:"sm",children:e.pronunciations.join(" ")}),e.definitions.map((n,i)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(d.E,{textAlign:"center",children:"".concat(e.definitions.length>1?i+1+".":""," ").concat(n)},i),e.definitions.length-1>i?(0,t.jsx)(y.c,{}):null]},i)),1!==e.word.split("").length?(0,t.jsx)(x.T,{align:"start",children:e.word.split("").map((i,r)=>(0,t.jsx)(x.T,{align:"start",children:(0,t.jsxs)(l.z,{children:[n=e.dictionary[i].pinyin.indexOf(e.pronunciations[r]),(0,t.jsx)(p,{hanzi:i,pinyin:e.dictionary[i].pinyin[n]}),(0,t.jsx)(x.T,{align:"start",children:(function(n,i){let t=e.dictionary[i].pinyin[n];return e.dictionary[i].pinyin.slice(n).map((e,n)=>({x:e,i:n})).filter(e=>{let{x:n}=e;return n==t}).map(e=>e.i)})(n,i).map((r,s,o)=>(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.z,{children:[(0,t.jsx)(d.E,{fontWeight:"bold",children:o.length>1?r+1+".":""},r),(0,t.jsx)(d.E,{children:e.dictionary[i].english[r+n]})]},r),s+1<o.length?(0,t.jsx)(y.c,{}):null]},s))},r)]},r)},r))}):null]})})]})]})};var v=i(3166),S=i(6987),z=i(3862),E=i(3885),k=i(9399);let C=function(e){let n=e.word.word===e.pronunciation[0],{isOpen:i,onOpen:r,onClose:s}=(0,v.j)(),{colorMode:o}=(0,h.G6)();return(0,t.jsx)(t.Fragment,{children:n?(0,t.jsx)(c.s,{align:"center",justify:"center",h:"70%",m:2,children:(0,t.jsx)(d.E,{fontSize:"lg",children:e.word.word})}):(0,t.jsxs)(S.Z,{variant:"unstyled",backgroundColor:"light"===o?"#B8EEFF":"#333c40",margin:"0.1rem",marginBottom:"0.5rem",padding:"0.2rem",border:"light"===o?"1px solid #468DA4":"1px solid #1e282c",borderRadius:"4",boxShadow:"1px 1px 1px rgba(0, 0, 0, 0.25)",onClick:r,children:[n?null:(0,t.jsx)(b,{pronunciations:e.pronunciation,word:e.word.word,definitions:e.definitions,dictionary:e.dictionary,isOpen:i,onOpen:r,onClose:s}),(0,t.jsx)(z.b,{children:(0,t.jsx)(E.o,{children:(0,t.jsx)(l.z,{spacing:"0.1rem",children:e.word.word.split("").map((n,i)=>(0,t.jsx)(p,{hanzi:n,pinyin:e.pronunciation[i]},i))})})}),(0,t.jsx)(E.o,{children:(0,t.jsx)(k.w,{children:(0,t.jsx)(d.E,{noOfLines:2,maxWidth:"10rem",minWidth:"5rem",fontSize:"sm",height:"2.6rem",marginTop:"0.5rem",marginBottom:"0.5rem",textAlign:"center",children:e.definitions.join("; ")})})})]})})},W=function(e){return(0,t.jsx)(c.s,{align:"stretch",w:"100%",h:"100%",px:["0","5%"],flexWrap:"wrap",mb:["45vh","20vh"],overflow:"hidden",children:e.sentence.map((n,i)=>(0,t.jsx)(C,{word:n,pronunciation:n.pinyin,definitions:n.definitions,dictionary:e.dictionary},i))})},_=function(e){let[n,i]=(0,r.useState)(!1),{colorMode:o}=(0,h.G6)();return(0,t.jsxs)(s.a,{className:"translation",p:4,borderWidth:1,borderBottomWidth:0,borderTopRadius:"lg",borderColor:"black",position:"fixed",bottom:0,left:["0%","10%"],right:["0%","10%"],width:["100%","80%"],height:n?"1vh":["45vh","20vh"],overflowY:n?"hidden":"scroll",shadow:"md",bg:"light"===o?"white":"#282828",zIndex:1,children:[(0,t.jsx)(s.a,{onClick:()=>i(!n),width:"40%",minW:"10rem",height:"0.3rem",bg:"darkgrey",borderRadius:"md",cursor:"pointer",position:"fixed",left:"50%",transform:"translateX(-50%)"}),(0,t.jsx)(E.o,{children:(0,t.jsx)(d.E,{mt:3,textAlign:"justify",px:5,children:e.text})})]})};var O=i(4605);function T(e){return(0,t.jsx)(E.o,{m:"0",position:"sticky",top:"2.5rem",left:0,right:0,zIndex:1,width:"100%",children:0==e.progress_percent?(0,t.jsx)(O.k,{w:"100%",colorScheme:"blue",hasStripe:!0,isIndeterminate:!0,overflow:"hidden",zIndex:"1000",size:"xs"}):(0,t.jsx)(O.k,{w:"100%",colorScheme:"blue",hasStripe:!0,size:"xs",overflow:"hidden",zIndex:"1000",value:e.progress_percent})})}let A=i(2651).A.create({baseURL:"https://mandobot.pythonanywhere.com/api"}),F=e=>{var n;let i=null===(n=e.response)||void 0===n?void 0:n.status;return i&&401!==i&&console.error(e),Promise.reject(e)};A.interceptors.response.use(void 0,e=>F(e));let D={segment:async function(e){return(await A.post("/segment?data=".concat(e))).data}};function I(){let e={translation:"",sentence:[]},[n,i]=(0,r.useState)(e),[c,h]=(0,r.useState)({}),[x,p]=(0,r.useState)(0),[u,m]=(0,r.useState)(""),[g,j]=(0,r.useState)(!1),f=e=>{i(n=>({translation:n.translation+" "+e.translation,sentence:[...n.sentence,...e.sentence]})),h(n=>({...n,...e.dictionary}))},w=async n=>{if(n.preventDefault(),i(e),p(0),""!=u){for(let e of(j(!0),u.split(RegExp("(?<=[。？！.?!])"))))await D.segment(e).then(e=>{f(e)}),p(n=>n+Math.floor(e.length/u.length*100));j(!1)}};return(0,t.jsxs)(s.a,{h:"100%",children:[g?(0,t.jsx)(T,{progress_percent:x}):null,(0,t.jsxs)("form",{onSubmit:w,children:[(0,t.jsx)(o.p,{type:"text",placeholder:"Enter Mandarin text to translate and segment",value:u,onChange:e=>{m(e.target.value)},mb:"0",mt:g?"0":"0.25rem"}),(0,t.jsxs)(l.z,{children:[(0,t.jsx)(a.$,{type:"submit",colorScheme:"teal",m:2,children:"Submit"}),g?(0,t.jsx)(d.E,{color:"gray.600",textAlign:"center",w:"60%",children:0==x?"Segmentation and translation can take several minutes.":"Your results will load one sentence at a time."}):null]})]}),(0,t.jsxs)(s.a,{h:"100%",children:[(0,t.jsx)(W,{sentence:n.sentence,translation:n.translation,dictionary:c}),0!==n.sentence.length?(0,t.jsx)(_,{text:n.translation}):null]})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[260,451,441,517,358],()=>n(9693)),_N_E=e.O()}]);