(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9693:(e,n,t)=>{Promise.resolve().then(t.bind(t,4974))},4974:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>I});var i=t(5155),r=t(2115),s=t(9949),o=t(6500),a=t(674),l=t(9829),d=t(3083),c=t(2533),h=t(3420);let x=function(e){return(0,i.jsxs)(h.T,{border:"solid 1px #468DA4",padding:"0.5rem",paddingTop:"0",backgroundColor:"#85E2FF",children:[(0,i.jsx)(d.E,{fontSize:"3xl",fontWeight:"bold",children:e.hanzi}),e.pinyin?(0,i.jsx)(d.E,{fontSize:"l",children:e.pinyin.toLowerCase()}):null]})};var p=t(5442);let m=function(e){return(0,i.jsxs)(h.T,{children:[(0,i.jsx)(p.D,{children:e.word}),e.definitions.map((e,n)=>(0,i.jsx)(d.E,{textAlign:"center",children:e},n)),1!==e.word.split("").length?(0,i.jsx)(h.T,{align:"start",children:e.word.split("").map((n,t)=>(0,i.jsxs)(a.z,{children:[(0,i.jsx)(x,{hanzi:n,pinyin:e.character_definitions[n].pinyin}),(0,i.jsx)(d.E,{children:e.character_definitions[n].english})]},t))}):void 0]})};var u=t(3166),j=t(6987),g=t(6677),f=t(2311),w=t(5477),b=t(4825),v=t(7504),y=t(3862),S=t(3885),z=t(9399);let E=function(e){let n=e.word.word===e.pronunciation[0],{isOpen:t,onOpen:r,onClose:s}=(0,u.j)();return(0,i.jsx)("div",{children:n?(0,i.jsx)(c.s,{align:"center",justify:"center",h:"70%",m:2,children:(0,i.jsx)(d.E,{fontSize:"lg",children:e.word.word})}):(0,i.jsxs)(j.Z,{variant:"unstyled",backgroundColor:"#B8EEFF",margin:"0.1rem",marginBottom:"0.5rem",padding:"0.2rem",border:"1px solid #468DA4",borderRadius:"4",boxShadow:"1px 1px 1px rgba(0, 0, 0, 0.25)",onClick:r,children:[n?null:(0,i.jsxs)(g.aF,{isOpen:t,onClose:s,isCentered:!0,children:[(0,i.jsx)(f.m,{}),(0,i.jsxs)(w.$,{maxWidth:"90vw",maxHeight:"90vh",width:"auto",height:"auto",children:[(0,i.jsx)(b.s,{}),(0,i.jsx)(v.c,{display:"flex",p:"3rem",overflow:"scroll",children:(0,i.jsx)(m,{word:e.word.word,definitions:e.definitions,character_definitions:e.dictionary})})]})]}),(0,i.jsx)(y.b,{children:(0,i.jsx)(S.o,{children:(0,i.jsx)(a.z,{spacing:"0.1rem",children:e.word.word.split("").map((n,t)=>(0,i.jsx)(x,{hanzi:n,pinyin:e.pronunciation[t]},t))})})}),(0,i.jsx)(S.o,{children:(0,i.jsx)(z.w,{children:(0,i.jsx)(d.E,{noOfLines:2,maxWidth:"10rem",minWidth:"5rem",fontSize:"sm",height:"2.6rem",marginTop:"0.5rem",marginBottom:"0.5rem",textAlign:"center",children:e.definitions.join("; ")})})})]})})},k=function(e){return(0,i.jsx)(c.s,{align:"stretch",w:"100%",h:"100%",px:["0","5%"],flexWrap:"wrap",mb:["45vh","20vh"],overflow:"hidden",children:e.sentence.map((e,n)=>(0,i.jsx)(E,{word:e,pronunciation:e.pinyin,definitions:e.definitions,dictionary:e.dictionary},n))})},_=function(e){let[n,t]=(0,r.useState)(!1);return(0,i.jsxs)(s.a,{className:"translation",p:4,borderWidth:1,borderBottomWidth:0,borderTopRadius:"lg",borderColor:"black",position:"fixed",bottom:0,left:["0%","10%"],right:["0%","10%"],width:["100%","80%"],height:n?"1vh":["45vh","20vh"],overflowY:n?"hidden":"scroll",shadow:"md",bg:"white",zIndex:1,children:[(0,i.jsx)(s.a,{onClick:()=>t(!n),width:"40%",minW:"10rem",height:"0.3rem",bg:"darkgrey",borderRadius:"md",cursor:"pointer",position:"fixed",left:"50%",transform:"translateX(-50%)"}),(0,i.jsx)(S.o,{children:(0,i.jsx)(d.E,{mt:3,textAlign:"justify",px:5,children:e.text})})]})};var C=t(4605);function W(e){return(0,i.jsx)(S.o,{m:"0",position:"sticky",top:"2.5rem",left:0,right:0,zIndex:1,width:"100%",children:0==e.progress_percent?(0,i.jsx)(C.k,{w:"100%",colorScheme:"blue",hasStripe:!0,isIndeterminate:!0,overflow:"hidden",zIndex:"1000",size:"xs"}):(0,i.jsx)(C.k,{w:"100%",colorScheme:"blue",hasStripe:!0,size:"xs",overflow:"hidden",zIndex:"1000",value:e.progress_percent})})}let A=t(2651).A.create({baseURL:"https://mandobot.pythonanywhere.com/api"}),T=e=>{var n;let t=null===(n=e.response)||void 0===n?void 0:n.status;return t&&401!==t&&console.error(e),Promise.reject(e)};A.interceptors.response.use(void 0,e=>T(e));let F={segment:async function(e){return(await A.post("/segment?data=".concat(e))).data}};function I(){let e={translation:"",sentence:[]},[n,t]=(0,r.useState)(0),[c,h]=(0,r.useState)(e),[x,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),j=e=>{h(n=>({translation:n.translation+" "+e.translation,sentence:[...n.sentence,...e.sentence]}))},g=async n=>{if(n.preventDefault(),h(e),t(0),""!=x){for(let e of(u(!0),x.split(RegExp("(?<=[。？！.?!])"))))await F.segment(e).then(e=>{j(e)}),t(n=>n+Math.floor(e.length/x.length*100));u(!1)}};return(0,i.jsxs)(s.a,{h:"100%",children:[m?(0,i.jsx)(W,{progress_percent:n}):null,(0,i.jsxs)("form",{onSubmit:g,children:[(0,i.jsx)(o.p,{type:"text",placeholder:"Enter Mandarin text to translate and segment",value:x,onChange:e=>{p(e.target.value)},mb:"0",mt:m?"0":"0.25rem"}),(0,i.jsxs)(a.z,{children:[(0,i.jsx)(l.$,{type:"submit",colorScheme:"teal",m:2,children:"Submit"}),m?(0,i.jsx)(d.E,{color:"gray.600",textAlign:"center",w:"60%",children:"Segmentation and translation can take several minutes."}):null]})]}),(0,i.jsxs)(s.a,{h:"100%",children:[(0,i.jsx)(k,{sentence:c.sentence,translation:c.translation}),0!==c.sentence.length?(0,i.jsx)(_,{text:c.translation}):null]})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[819,287,441,517,358],()=>n(9693)),_N_E=e.O()}]);